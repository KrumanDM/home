{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Documents/home/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import s2 from'../../s1-main/App.module.css';import s from'./HW14.module.css';import axios from'axios';import SuperDebouncedInput from'./common/c8-SuperDebouncedInput/SuperDebouncedInput';import{useSearchParams}from'react-router-dom';/*\n* 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n* 2 - дописать функцию sendQuery в HW14\n* 3 - дописать функцию onChangeText в HW14\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW14 в HW5/pages/JuniorPlus\n* */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getTechs=function getTechs(find){return axios.get('https://samurai.it-incubator.io/api/3.0/homework/test2',{params:{find:find}}).catch(function(e){var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.errorText)||e.message);});};var HW14=function HW14(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),find=_useState2[0],setFind=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),techs=_useState6[0],setTechs=_useState6[1];var sendQuery=function sendQuery(value){setLoading(true);getTechs(value).then(function(res){// делает студент\n// сохранить пришедшие данные\nif(res){console.log(res);setTechs(res.data.techs);setLoading(false);}else{// обработка случая, когда res является void\nconsole.log('No response from getTechs');}//В этом примере, если res является void, код просто выводит сообщение в консоль \n//и не пытается обращаться к res.data.techs. Вы можете заменить console.log('No response from getTechs')\n//на любой код, который вы хотите выполнить в случае, если getTechs не возвращает ответ.\n});};var onChangeText=function onChangeText(value){setFind(value);// делает студент\n// добавить/заменить значение в квери урла\nsetSearchParams({find:value});//Теперь при изменении значения в поле ввода, \n//будет обновляться состояние find и значение параметра find в квери урла.\n};useEffect(function(){var params=Object.fromEntries(searchParams);sendQuery(params.find||'');setFind(params.find||'');},[]);var mappedTechs=techs.map(function(t){return/*#__PURE__*/_jsx(\"div\",{id:'hw14-tech-'+t,className:s.tech,children:t},t);});return/*#__PURE__*/_jsxs(\"div\",{id:'hw14',children:[/*#__PURE__*/_jsx(\"div\",{className:s2.hwTitle,children:\"Homework #14\"}),/*#__PURE__*/_jsxs(\"div\",{className:s2.hw,children:[/*#__PURE__*/_jsx(SuperDebouncedInput,{id:'hw14-super-debounced-input',value:find,onChangeText:onChangeText,onDebouncedChange:sendQuery}),/*#__PURE__*/_jsx(\"div\",{id:'hw14-loading',className:s.loading,children:isLoading?'...ищем':/*#__PURE__*/_jsx(\"br\",{})}),mappedTechs]})]});};export default HW14;","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperDebouncedInput","useSearchParams","getTechs","find","get","params","catch","e","alert","response","data","errorText","message","HW14","setFind","isLoading","setLoading","searchParams","setSearchParams","techs","setTechs","sendQuery","value","then","res","console","log","onChangeText","Object","fromEntries","mappedTechs","map","t","tech","hwTitle","hw","loading"],"sources":["C:/Users/User/Documents/home/src/s2-homeworks/hw14/HW14.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport s2 from '../../s1-main/App.module.css'\nimport s from './HW14.module.css'\nimport axios from 'axios'\nimport SuperDebouncedInput from './common/c8-SuperDebouncedInput/SuperDebouncedInput'\nimport {useSearchParams} from 'react-router-dom'\n\n/*\n* 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n* 2 - дописать функцию sendQuery в HW14\n* 3 - дописать функцию onChangeText в HW14\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW14 в HW5/pages/JuniorPlus\n* */\n\nconst getTechs = (find: string) => {\n    return axios\n        .get<{ techs: string[] }>(\n            'https://samurai.it-incubator.io/api/3.0/homework/test2',\n            {params: {find}}\n        )\n        .catch((e) => {\n            alert(e.response?.data?.errorText || e.message)\n        })\n}\n\nconst HW14 = () => {\n    const [find, setFind] = useState('')\n    const [isLoading, setLoading] = useState(false)\n    const [searchParams, setSearchParams] = useSearchParams()\n    const [techs, setTechs] = useState<string[]>([])\n\n    const sendQuery = (value: string) => {\n        setLoading(true)\n        getTechs(value)\n            .then((res) => {\n                // делает студент\n                // сохранить пришедшие данные\n                if (res) {\n                    console.log(res);\n                    setTechs(res.data.techs)\n                    setLoading(false)\n                } else {\n                    // обработка случая, когда res является void\n                    console.log('No response from getTechs');\n                }\n    //В этом примере, если res является void, код просто выводит сообщение в консоль \n    //и не пытается обращаться к res.data.techs. Вы можете заменить console.log('No response from getTechs')\n    //на любой код, который вы хотите выполнить в случае, если getTechs не возвращает ответ.\n                \n            })\n            \n    }\n\n    const onChangeText = (value: string) => {\n        setFind(value)\n        // делает студент\n\n        // добавить/заменить значение в квери урла\n        setSearchParams({ find: value })\n        //Теперь при изменении значения в поле ввода, \n        //будет обновляться состояние find и значение параметра find в квери урла.\n    }\n\n    useEffect(() => {\n        const params = Object.fromEntries(searchParams)\n        sendQuery(params.find || '')\n        setFind(params.find || '')\n    }, [])\n\n    const mappedTechs = techs.map(t => (\n        <div key={t} id={'hw14-tech-' + t} className={s.tech}>\n            {t}\n        </div>\n    ))\n\n    return (\n        <div id={'hw14'}>\n            <div className={s2.hwTitle}>Homework #14</div>\n\n            <div className={s2.hw}>\n                <SuperDebouncedInput\n                    id={'hw14-super-debounced-input'}\n                    value={find}\n                    onChangeText={onChangeText}\n                    onDebouncedChange={sendQuery}\n                />\n\n                <div id={'hw14-loading'} className={s.loading}>\n                    {isLoading ? '...ищем' : <br/>}\n                </div>\n\n                {mappedTechs}\n            </div>\n        </div>\n    )\n}\n\nexport default HW14\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}